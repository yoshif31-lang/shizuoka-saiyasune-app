name: Nagi Auto Logic Update

on:
  schedule:
    - cron: '0 0 * * *' # 毎日日本時間の午前9時に実行
  workflow_dispatch: # 手動実行用ボタン

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          token: ${{ secrets.GH_TOKEN }} # 金庫に入れた合鍵を使うよ
      
      - name: Run Nagi Logic
        run: node update_logic.js
        
      - name: Commit and Push
        run: |
          git config --global user.name "Nagi-AI"
          git config --global user.email "nagi@example.com"
          git add index.html
          git commit -m "凪：市場分析に基づき判定基準を更新" || exit 0
          git push
